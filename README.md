  
   
   
                                  -= Synapse =-
                           
                                КРАТКОЕ  ОПИСАНИЕ
                           
   
   1. ПРЕДИСЛОВИЕ                      "Документация? Да кто ее вообще читает?"
   
   Здесь вы найдете только описание для быстрого старта, а остальное, легко
 находится в Сети.
   WHY nodejs? Система построена целиком и полностью на nodejs, потому что на
 момент создания, это хорошая платформа, как для создания серверной части, так
 и для сборки WEB-клиента. Одна среда, один язык для клиента и сервера, и куча
 готовых модулей почти на все случаи жизни.
   
   2. СТРУКТУРА ФАЙЛОВ
    
 /synapse/
     |-/.other/        - прочие файлы дистрибутива
     |-/client/        - место для готового клиентского приложения
     |-/client_source/ - исходный код клиентского приложения
     |-/core/          - файлы ядра системы
     |-/db/            - базы данных системы
       |-synapse.db    - база данных, хранящая доступы и настройки
       |-create_db.sql - скрипт создания начальной базы данных
     |-/node_modules/  - стандартный системный каталог модулей nodejs
     |-/sslcert/       - сертификаты для https соединения
     |-/tasks/         - "задачи" - отдельные модули для отдельных задач
     |-/users/         - папки с результатами работы для пользователей
     |
     |-/package.json    - стандартный файл-описание пакета npm
     |-/app.js          - основное приложение (сервер); подробности настройки
                         запуска см. в app.js в комментариях
   
   
   3. УСТАНОВКА 
     (потребуется Internet)
   
   3.1. Скачайте и установите nodejs (https://nodejs.org/)

   3.2. Некоторые node_modules требуют компиляции из исходников, поэтому, 
        установите необходимые для этого инструменты (от имени администратора):
          \> npm install --global --production windows-build-tools
        - установите git:  https://git-scm.com/download/win
        - установите драйверы Oracle Instant Client, которые потребуются для 
        компиляции и установки модуля oracledb (см. документацию по модулю
        https://github.com/oracle/node-oracledb) 

   3.3. Создайте каталог /synapse/ и распакуйте в него архив "synapse.7z"

   3.4. В каталоге /synapse/ выполните установку всех модулей:
          \> npm install
        (!!!) корректная работа некоторых модулей не гарантируется, поэтому
        в подкаталоге /.other/node_modules сохранены рабочие копии
        таких модулей для возможности замены вручную. 
   
   3.5. Создайте символическую ссылку, выполнив /core/node_modules.cmd

   3.6. С помощью "SQLite Studio" (http://sqlitestudio.pl): 
        - cоздайте чистую базу /db/synapse.db, выполнив скрипт "create_db.sql"
        - отредактируйте таблицу [users]: login, name, email для первой 
          учетной записи, подставив соответственно, свои реквизиты из домена
        - отредактируйте таблицу [settings]: установите логин и пароль 
          технологических пользователей для доступа в ntlm и ibso, а также
          имя файла сертификата безопасности в /sslcert/ и пароль для
          сертификата для группы ssl
      
    
   4. РЕЖИМЫ РАБОТЫ СЕРВЕРА
    
   4.1. "Боевой" режим  
          \> node app --production
   Серверное приложение отдает клиенту (по запросу) статические файлы с 
 клиентским приложением из каталога /client/, а также обрабатывает все 
 запросы, поступающие из клиентского приложения
   
   4.2. Режим разработки
          \> node app
   Серверное приложение выполняет сборку клиентского приложения из исходных
 файлов в каталоге /client_source/ "на лету". Для сборки используется популярный
 сборщик (bundler) - Webpack. Основой клиентского приложения является компонентный
 фреймворк Vue.js. Если во время работы, в данном режиме изменить какой-нибудь
 файл (компонент) клиентской части, <изменения> будут отгружены в клиентский 
 браузер и отображены в ту же секунду. Для понимания работы сборщика следует 
 изучить документацию по Webpack. Для упрощения системы, и снижения порога вхождения
 более не задействованы никакие фреймворки.
   
   4.3. Сервер выводит информацию в <stdout>, который можно перенаправить в 
 файл (на усмотрение администратора)
   
   4.4. Для запуска в Windows в качестве сервиса в дистрибутив включен nssm.exe
 Запустите nssm.exe и следуйте указаниям, которые дает программа.
   
   
   5. РАЗРАБОТКА ЗАДАЧИ
   
   Задача состоит из следующих компонентов:
    - /tasks/<имя_модуля>.js   
    - /client_source/tasks/<имя_модуля>.html 
    - /db/synapse.db:[objects] class='tasks' name=<имя_модуля>
   
   5.1. Чтобы самому написать задачу /tasks/ вам потребуется знание JavaScript.
 Желательно (но не обязательно) знать JavaScript в версии ES5.1 с функционалкой 
 (forEach, map, reduce), и ES6 со всеми этими Promise, стрелочными фунцкиями.
 Для запросов к базам данных понадобится знание SQL и изучение готовых примеров.
   В подкаталоге /tasks/ расположены отдельные модули для каждой решаемой 
 задачи. Модули запускаются в отдельном процессе node, получают параметры через 
 командную строку и отдают информацию в основной процесс через <stdout>. Для 
 примера см. /tasks/validate.js. Дополнительно, схема работы клиента и сервера 
 подробно описана в /core/tasks.js
   
   5.2. В подкаталоге /client_source/tasks/ расположены *.html файлы для
 реализации интерфейса пользователя. Для примера см. validate.html. Для начала
 достаточно немного понимать как работает язык html. В продвинутом варианте,
 можно добавлять расширенный функционал Vue, поскольку *.html файлы
 в /tasks/ по сути тоже Vue-компоненты.
   
   5.3. Имя модуля /tasks/ и интерфейса /client_source/tasks/ должно совпадать.
 Кроме того в системную базу данных /db/synapse.db в таблицу [objects] необходимо
 внести запись cо значениями: class="tasks" и name="имя модуля" (рекомендуется 
 делать через SQLite editor). После внесения записи в базу данных, администратор
 может раздавать доступы в WEB-интерфейсе самой системы.
   
   
   