'use strict'

// note: use this
// set NODE_TLS_REJECT_UNAUTHORIZED=0

const request = require('request')
const url = 'http://localhost'

var accs = ['1803521154', '1803474258', '1803407541', '1803387837', '1803519442', '1803474608', '1803506877', '1803465773', '127332665', '1803425860']//, '1803452553', '1803459497', '1803438739', '1803452464', '1803389660', '1803441615', '1803397704', '1803434552', '1456228299', '1803446992', '1803538750', '1803505540', '1803463404', '1803539089', '1451697332', '1179184108', '2634104589', '1803400200', '1803427666', '1803458809', '1803458387', '1803389199', '1803426193', '1803402038', '1803494632', '1803472398', '136106162', '1803502361', '1803538671', '1803486179', '1803529400', '1803439917', '1803509378', '1803468144', '1803534806', '1803527898', '1803504880', '1803451476', '2380405131', '1803382739', '1803473231', '1803454621', '1803519003', '1803527037', '1803393065', '1803396764', '127439697', '1803460613', '1803403648', '1803499358', '1803455299', '1803464388', '1803390575', '1803388738', '1803393997', '1803447073', '1803509711', '1803398621', '1803404569', '1803438820', '1803406163', '1803444175', '1803490895', '1803428009', '1803405700', '1803506207', '1803528234', '1803440940', '1803396296', '1803408001', '1803427585', '1803526595', '1803534221', '1803471616', '1803391956', '1803521230', '1803457694', '1803395372', '1803521078', '1803429702', '1803403183', '1803529483', '1803440257', '1803441281', '1803392610', '1803391493', '1803422052', '1803402497', '1803443424', '1803467110', '1803405028', '1803407078', '1803399729', '1803487603', '1803519084', '1803439493', '1803523767', '1803501123', '1803402715', '1803443009', '1803404107', '1803495126', '1803523439', '1803433509', '1803395831', '1803397234', '1803508547', '1803452894', '1803517825', '1803394459', '1803521580', '1803461046', '1803535584', '1803406626', '2351293274', '2159154117', '1698397589', '2975496120', '1803390108', '2334298346', '2164763497', '136228041', '1803511057']

console.time('limitauth')
var count = 0
accs.forEach(acc =>
	request.get({ url: url + `/telebot/limitauth?acc_id=${acc}`, agentOptions: { strictSSL: false } }, function (err, res, body) {
		if (err) console.log(err)
		console.log(body)
		count += 1
		if (count === accs.length) {
			console.log(accs.length, ' requests in:')
			console.timeEnd('limitauth')
		}
	})
)
